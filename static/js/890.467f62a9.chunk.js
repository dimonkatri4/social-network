"use strict";(self.webpackChunkreact_1=self.webpackChunkreact_1||[]).push([[890],{7430:function(e,t,a){a.r(t),a.d(t,{default:function(){return he}});var n=a(5671),s=a(3144),r=a(136),o=a(2882),l=a(2791),c=a(4942),i="post_item__bqeNB",u="post_caption__OVOV+",m="post_date__bbJd4",p="post_message__zukXd",f="post_userName__tOfVf",_="post_post_panel__6lrw8",E="post_like__P6Y2O",d="post_share__+hVBR",h="post_panelIcon__bUEQv",v=a(4764),g=a(1363),N=a(1694),P=a.n(N),S=function(e){return l.createElement("div",{className:"".concat(i," profile_block")},l.createElement("div",{className:u},l.createElement("img",{src:e.photo,alt:"userPhoto"}),l.createElement("div",{className:f},e.userName),l.createElement("div",{className:m},"Published: ",e.date)),l.createElement("div",{className:p},e.message),l.createElement("div",{className:_},l.createElement("ul",null,l.createElement("li",null,l.createElement("div",{className:P()(E,h),onClick:function(){e.changeIsLiked(e.id)}},l.createElement(g.G,{icon:e.isLiked?["fas","heart"]:["far","heart"]})),l.createElement("span",null,e.likeCount)),l.createElement("li",null,l.createElement("div",{className:h},l.createElement(g.G,{icon:["far","eye"]})),l.createElement("span",null,e.viewsCount)),l.createElement("li",null,l.createElement("div",{className:h},l.createElement(g.G,{icon:["far","comment"]})),l.createElement("span",null,e.commentsCount)),l.createElement("li",null,l.createElement("div",{className:P()(d,h)},l.createElement(g.G,{icon:["far","share-square"]})),l.createElement("span",null,e.shareCount)))))},k=l.memo((function(e){var t=e.posts.map((function(t){return l.createElement(S,{message:t.message,likeCount:t.likeCount,userName:t.userName,commentsCount:t.commentsCount,viewsCount:t.viewsCount,shareCount:t.shareCount,date:t.date,isLiked:t.isLiked,id:t.id,changeIsLiked:e.changeIsLiked,key:t.id,photo:t.photo})}));return l.createElement("div",null,t)})),I="profile_content__O0Wwd",C=a(8058),w="createPost_ava__oclsV",O="createPost_profile_block__gOVY4",b="createPost_create_post__EwC5m",R="createPost_panel__ZPjYa",G="createPost_inputText__blfTH",L="createPost_iconPanel__xLaHL",y=a(3720),A=a(5304),M=a(1074),Z=function(e){return l.createElement(y.l0,{onSubmit:e.onSubmit},(function(e){var t=e.handleSubmit;return l.createElement("form",{onSubmit:t},l.createElement("div",{className:G},l.createElement(y.gN,{component:M.g,name:"messageText",placeholder:"write something",validate:A.C1}),l.createElement("div",{className:R},l.createElement("span",{className:L},l.createElement(g.G,{icon:"music"})),l.createElement("span",{className:L},l.createElement(g.G,{icon:"image"})),l.createElement("span",{className:L},l.createElement(g.G,{icon:"video"})),l.createElement("span",{className:L},l.createElement(g.G,{icon:"camera"})),l.createElement("button",{className:"button"},"Publish"))))}))},D=function(e){return l.createElement("div",{className:"".concat(O," profile_block")},l.createElement("div",{className:b},e.profileOwner&&l.createElement("img",{className:w,src:e.profileOwner.photos.small,alt:"avatar"}),l.createElement(Z,{onSubmit:function(t){e.addPost(t.messageText),t.messageText=""}})))},T=a(4233),V=(0,T.$j)((function(e){return{profileOwner:e.profilePage.profileOwner}}),{addPost:C.q2})(D),B="coverInfo_cover_info__nAPKC",x="coverInfo_user_name__Dd+2Z",j="coverInfo_nameWithStatus__R7RK0",F=a(885),Y="profileStatus_addStatus__8Dce2",q="profileStatus_statusBlock__YLEVl",H="profileStatus_textStatus__yVGMD",J="profileStatus_inputStatus__GgleJ",K="profileStatus_error__BCCwu",W="profileStatus_inputBlock__HH7hR",U="profileStatus_close__yMloK",$="profileStatus_updateStatus__SaYvJ",z=a(3174),Q=function(e){var t=(0,l.useState)(!1),a=(0,F.Z)(t,2),n=a[0],s=a[1],r=(0,l.useState)(e.status),o=(0,F.Z)(r,2),c=o[0],i=o[1];(0,l.useEffect)((function(){i(e.status),e.setErrorInStatus(null)}),[e.status,n]);var u,m=(0,l.useRef)(null);u=m,(0,l.useEffect)((function(){var e=function(e){n&&!u.current.contains(e.target)&&f()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[u,n]);var p=function(){e.updateStatus(c),c.length<=300?s(!1):e.setErrorInStatus()},f=function(){s(!1),i(e.status)};return l.createElement("div",{className:q},!n&&l.createElement("span",{className:H,onDoubleClick:e.isOwner?function(){s(!0)}:void 0,title:"Double click to change status"},e.status||e.isOwner&&l.createElement("span",{className:Y},"Double click to add status")," "),n&&l.createElement("div",{className:W,ref:m},l.createElement("input",{className:P()("inputPlace",J),onChange:function(e){var t=e.target.value;i(t)},autoFocus:!0,value:c,onKeyDown:function(e){"Enter"===e.key&&p(),"Escape"===e.key&&f()}}),l.createElement("span",{className:$},l.createElement(g.G,{icon:z.LEp,onClick:function(){return p()}})),l.createElement("span",{className:U},l.createElement(g.G,{icon:z.NBC,onClick:f}))),e.errorInStatus&&l.createElement("div",{className:K},e.errorInStatus))},X=function(e){return l.createElement("div",{className:B},l.createElement("div",{className:j},l.createElement("div",{className:x},e.fullName),l.createElement(Q,{status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,errorInStatus:e.errorInStatus,setErrorInStatus:e.setErrorInStatus})))},ee="coverPhoto_cover_photo__hIOOG",te=a.p+"static/media/cover-photo.27dde1a4dd11e23d9655.jpg",ae=function(){return l.createElement("div",{className:ee},l.createElement("img",{src:te,alt:""}))},ne="mainPhoto_main_photo__SCAl9",se="mainPhoto_inputPhoto__gA-m-",re="mainPhoto_inputTag__nv6BS",oe="mainPhoto_photoBlock__Tnu6a",le="mainPhoto_inputWrapper__9hg07",ce=function(e){var t=(0,l.useRef)(null);(0,l.useEffect)((function(){e.getMainPhotoRef(t)}),[t]);return l.createElement("div",{className:oe,ref:t},l.createElement("div",{className:ne,onClick:function(){return e.setActive(!0)}},l.createElement("img",{src:e.photo.large||v,alt:""})),e.isOwner&&l.createElement("div",{className:le},l.createElement("input",{type:"file",accept:"image/*",id:"inputPhoto",onChange:function(t){0!==t.target.files.length&&e.savePhoto(t.target.files[0])},className:re}),l.createElement("label",{htmlFor:"inputPhoto",className:se},l.createElement(g.G,{icon:z._jT}))))},ie="cover_cover__enV07",ue=a(5606),me=function(e){return l.createElement(l.Fragment,null,e.profile?l.createElement("div",{className:ie},l.createElement(ae,null),l.createElement(ce,(0,c.Z)({photo:e.profile.photos,isOwner:e.isOwner,savePhoto:e.savePhoto,getMainPhotoRef:e.getMainPhotoRef,setActive:e.setActive},"getMainPhotoRef",e.getMainPhotoRef)),l.createElement(X,{fullName:e.profile.fullName,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,errorInStatus:e.errorInStatus,setErrorInStatus:e.setErrorInStatus})):l.createElement(ue.Z,null))},pe=a(9271),fe=function(e){return e.isAuth?l.createElement(l.Fragment,null,l.createElement(me,(0,c.Z)({profile:e.profilePage.profile,status:e.status,updateStatus:e.updateStatus,isOwner:e.isOwner,savePhoto:e.savePhoto,errorInStatus:e.profilePage.error,setErrorInStatus:e.setErrorInStatus,getMainPhotoRef:e.getMainPhotoRef,setActive:e.setActive},"getMainPhotoRef",e.getMainPhotoRef)),l.createElement("div",{className:I},l.createElement(V,null),l.createElement(k,{posts:e.profilePage.posts,changeIsLiked:e.changeIsLiked}))):l.createElement(pe.l_,{to:"/login"})},_e=a(7781),Ee=a(4517),de=function(e){(0,r.Z)(a,e);var t=(0,o.Z)(a);function a(){return(0,n.Z)(this,a),t.apply(this,arguments)}return(0,s.Z)(a,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authId)||this.props.history.push("/login"),e&&(this.props.getProfile(e),this.props.getStatus(e))}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return console.log("PROFILECONTAINER RENDER"),l.createElement(fe,Object.assign({},this.props,{isOwner:!this.props.match.params.userId}))}}]),a}(l.Component),he=(0,_e.qC)((0,T.$j)((function(e){return{profilePage:e.profilePage,status:e.profilePage.status,authId:e.auth.userId,isAuth:e.auth.isAuth}}),{getProfile:C.Ai,getStatus:C.lR,updateStatus:C.Nf,savePhoto:C.Ju,setErrorInStatus:C.Ox,changeIsLiked:C.G1,getMainPhotoRef:Ee.G_}),pe.EN)(de)}}]);
//# sourceMappingURL=890.467f62a9.chunk.js.map